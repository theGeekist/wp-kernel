#### Task 1.1 Inventory - Pipeline orchestration

| Module                                           | Export(s)                                                                                 | WordPress behaviour                                                                                                                                                          | Inputs consumed                                                                                               |
| ------------------------------------------------ | ----------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------- |
| `packages/cli/src/builders/php/builder.ts`       | `createPhpBuilder`, `PhpDriverConfigurationOptions`                                       | Orchestrates the PHP generation pipeline so WordPress-aware helpers (REST controllers, capability, persistence, blocks) run in sequence via the php-json-ast driver channel. | `BuilderApplyOptions` (`input.ir`, `reporter`, `context`), optional php-json-ast driver configuration.        |
| `packages/cli/src/builders/php/channel.ts`       | `getPhpBuilderChannel`, `resetPhpBuilderChannel`, `PhpBuilderChannel`, `PhpProgramAction` | Bridges CLI helpers to the php-json-ast program channel that ultimately feeds WordPress PHP programs to the writer.                                                          | Pipeline context managed by `channelHelper` (workspace-scoped channel state).                                 |
| `packages/cli/src/builders/php/channelHelper.ts` | `createPhpChannelHelper`                                                                  | Resets both the CLI and php-json-ast channels before generation so each WordPress build has isolated AST buffers.                                                            | `BuilderApplyOptions` (`context` workspace) and implicit php-json-ast channel state.                          |
| `packages/cli/src/builders/php/writer.ts`        | `createPhpProgramWriterHelper`, `CreatePhpProgramWriterHelperOptions`                     | Delegates to php-json-ast's program writer so generated WordPress PHP programs flush to disk with the configured driver.                                                     | Driver configuration plus pipeline `input.outputDir` and workspace FS provided through `BuilderApplyOptions`. |

#### Task 1.1 Inventory - Core file generators

| Module                                                 | Export(s)                                                       | WordPress behaviour                                                                                                                                                                   | Inputs consumed                                                                                     |
| ------------------------------------------------------ | --------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------- |
| `packages/cli/src/builders/php/baseController.ts`      | `createPhpBaseControllerHelper`                                 | Emits an abstract `Rest\BaseController` with the canonical `get_namespace()` implementation and generated docblocks tying the file back to the WordPress resource namespace.          | `ir.meta.origin`, `ir.meta.sanitizedNamespace`, `ir.php.namespace`, target `outputDir`.             |
| `packages/cli/src/builders/php/indexFile.ts`           | `createPhpIndexFileHelper`                                      | Builds `index.php` that returns an array mapping fully-qualified WordPress REST controller, capability, and registry classes to their generated files.                                | `IRv1` (`ir.meta.origin`, `ir.php.namespace`, `ir.php.outputDir`, `ir.resources`).                  |
| `packages/cli/src/builders/php/persistenceRegistry.ts` | `createPhpPersistenceRegistryHelper`, `buildPersistencePayload` | Generates `Registration\PersistenceRegistry` returning storage and identity metadata for WordPress resources so the runtime can resolve persistence wiring.                           | `IRv1` resources (storage + identity sections), sanitized via CLI utilities.                        |
| `packages/cli/src/builders/php/capability.ts`          | `createPhpCapabilityHelper`, `reportCapabilityWarnings`         | Produces `Capability\Capability` with capability maps, fallback handling, REST permission callbacks, and `WP_Error` factories. Logs missing capability warnings for WordPress routes. | `IRv1.capabilityMap` (definitions, fallback, warnings), `Reporter`, `ir.php.namespace`, file paths. |

#### Task 1.1 Inventory - Resource controllers & shared utilities

| Module                                                                       | Export(s)                                                                                                                              | WordPress behaviour                                                                                                                                                                                             | Inputs consumed                                                                                         |
| ---------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- |
| `packages/cli/src/builders/php/resourceController.ts`                        | `createPhpResourceControllerHelper`                                                                                                    | Creates one `Rest\{Resource}Controller` per resource, wiring docblocks, namespace imports (`WP_Error`, `WP_REST_Request`, capabilities), route metadata, cache hints, and dispatch through route-kind builders. | `IRv1` resources (routes, storage, identity, schema provenance), workspace paths, canonical base paths. |
| `packages/cli/src/builders/php/resourceController/stubs.ts`                  | `buildNotImplementedStatements`                                                                                                        | Emits placeholder route implementations returning `WP_Error(501)` with TODO comments for WordPress handlers that lack CLI support.                                                                              | Individual `IRRoute` (HTTP method + path).                                                              |
| `packages/cli/src/builders/php/resourceController/routes/handleRouteKind.ts` | `buildRouteKindStatements`                                                                                                             | Routes controller methods to storage-specific implementations (transient, wp-option, wp-post, taxonomy) and mutation helpers, keeping WordPress semantics centralised.                                          | `IRResource`, `IRRoute`, resolved identity, route metadata kind, cache segments, error-code factory.    |
| `packages/cli/src/builders/php/resourceController/routes/list.ts`            | `buildListRouteStatements`                                                                                                             | Builds REST list handlers that normalise pagination, assemble `WP_Query` args, attach taxonomy/meta queries, execute cached queries, and return total counts.                                                   | `IRResource.storage` (wp-post/wp-taxonomy), Pascal-case name, metadata host, cache segmentation data.   |
| `packages/cli/src/builders/php/resourceController/routes/get.ts`             | `buildGetRouteStatements`                                                                                                              | Generates single-resource REST handlers that enforce identity, hydrate WP_Post data, wrap cache reads, and raise WordPress errors when entities are missing.                                                    | `IRResource`, resolved identity, Pascal-case name, error-code factory, metadata host + cache segments.  |
| `packages/cli/src/builders/php/resource/request.ts`                          | `buildRequestParamAssignmentStatement`                                                                                                 | Standardises access to `$request->get_param()` with optional casting so controllers can consume WordPress REST request parameters safely.                                                                       | Request variable name, parameter key, optional destination and scalar cast kind.                        |
| `packages/cli/src/builders/php/resource/errors.ts`                           | `buildWpErrorReturn`, `buildIsWpErrorGuard`, `buildReturnIfWpError`                                                                    | Provides canonical `WP_Error` returns and guards for early exit patterns in REST controllers and helpers.                                                                                                       | Error codes/messages/status plus arbitrary expressions to guard.                                        |
| `packages/cli/src/builders/php/resource/utils.ts`                            | Numerous builders (`normaliseVariableReference`, `buildScalarCast`, `buildMethodCallAssignmentStatement`, etc.)                        | Supplies reusable AST builders for WordPress controller patterns (variable normalisation, casting, foreach loops, cache instrumentation) so storage-specific helpers remain declarative.                        | Variable names, scalar kinds, callable/method descriptors, statements to append.                        |
| `packages/cli/src/builders/php/resource/phpValue.ts`                         | `variable`, `expression`, `renderPhpValue`                                                                                             | Renders declarative PHP value descriptors (scalars, arrays, expressions) into AST nodes for config payloads returned by WordPress helpers.                                                                      | Value descriptors assembled from IR data or helper outputs.                                             |
| `packages/cli/src/builders/php/resource/query.ts`                            | `buildQueryArgsAssignmentStatement`, `buildPaginationNormalisationStatements`, `buildPageExpression`, `buildWpQueryExecutionStatement` | Encapsulates WordPress `WP_Query` assembly, including pagination guards, cache metadata, and query execution for REST list endpoints.                                                                           | Target variable names, pagination options, cache scope/segments, metadata host.                         |

#### Task 1.1 Inventory - WP_Post resources

| Module                                                                     | Export(s)                                                                                                                                           | WordPress behaviour                                                                                                                                                 | Inputs consumed                                                                                 |
| -------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------- |
| `packages/cli/src/builders/php/resource/wpPost/identity.ts`                | `buildIdentityValidationStatements`                                                                                                                 | Validates WP_Post identity parameters (ID vs. slug) and produces `WP_Error` responses when lookups fail.                                                            | `IRResource` identity config, Pascal-case name, error-code factory.                             |
| `packages/cli/src/builders/php/resource/wpPost/list.ts`                    | `buildListItemsInitialiserStatement`, `buildListForeachStatement`                                                                                   | Prepares `$items` arrays and foreach loops that hydrate REST collection responses from `WP_Post` IDs.                                                               | Pascal-case name for helper method references.                                                  |
| `packages/cli/src/builders/php/resource/wpPost/metaQuery.ts`               | `collectMetaQueryEntries`, `buildMetaQueryStatements`                                                                                               | Collects and renders post meta query fragments so list endpoints can filter via `meta_query`.                                                                       | `IRResource.storage.metaQueries`, request variable names.                                       |
| `packages/cli/src/builders/php/resource/wpPost/taxonomyQuery.ts`           | `collectTaxonomyQueryEntries`, `buildTaxonomyQueryStatements`                                                                                       | Builds taxonomy-aware query fragments (including relation + terms) for `WP_Query`.                                                                                  | `IRResource.storage.taxonomies`, taxonomy filters from IR.                                      |
| `packages/cli/src/builders/php/resource/wpPost/mutations/macros.ts`        | Macro builders (`buildStatusValidationStatements`, `buildSyncMetaStatements`, `buildSyncTaxonomiesStatements`, `buildCachePrimingStatements`, etc.) | Encodes reusable sequences for create/update/delete mutations: status validation, meta/taxonomy sync, cache priming, and response preparation using WordPress APIs. | Mutation configuration (metadata keys, taxonomy map, cache descriptors), target variable names. |
| `packages/cli/src/builders/php/resource/wpPost/mutations/helpers.ts`       | `syncWpPostMeta`, `syncWpPostTaxonomies`, `prepareWpPostResponse`                                                                                   | Wraps WordPress functions (`update_post_meta`, `wp_set_object_terms`, `get_post`) to synchronise and hydrate responses while normalising errors.                    | Resource mutation payloads, taxonomy metadata, WP_Post instances, error-code factory.           |
| `packages/cli/src/builders/php/resource/wpPost/mutations/routes/create.ts` | `buildCreateRouteStatements`                                                                                                                        | Generates REST create handlers that insert posts, sync metadata/taxonomies, prime caches, and return hydrated responses.                                            | `IRResource`, Pascal-case name, mutation contract metadata keys.                                |
| `packages/cli/src/builders/php/resource/wpPost/mutations/routes/update.ts` | `buildUpdateRouteStatements`                                                                                                                        | Builds REST update handlers performing permission identity checks, post updates, metadata/taxonomy sync, and cache refresh.                                         | `IRResource`, Pascal-case name, resolved identity, mutation metadata keys.                      |
| `packages/cli/src/builders/php/resource/wpPost/mutations/routes/remove.ts` | `buildDeleteRouteStatements`                                                                                                                        | Creates REST delete handlers that validate identity, call `wp_delete_post`, manage cache invalidation, and format responses or `WP_Error`.                          | `IRResource`, Pascal-case name, resolved identity, mutation metadata keys.                      |

#### Task 1.1 Inventory - WP_Option, transient, and taxonomy resources

| Module                                                         | Export(s)                                                                                                                                                          | WordPress behaviour                                                                                                                                 | Inputs consumed                                                                                                      |
| -------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------- |
| `packages/cli/src/builders/php/resource/wpOption/helpers.ts`   | `buildWpOptionHelperMethods`                                                                                                                                       | Adds private helpers for option name resolution and autoload normalisation when reading/updating WordPress options.                                 | `IRResource` option storage config, Pascal-case name.                                                                |
| `packages/cli/src/builders/php/resource/wpOption/routes.ts`    | `buildWpOptionGetRouteStatements`, `buildWpOptionUpdateRouteStatements`, `buildWpOptionUnsupportedRouteStatements`                                                 | Generates REST handlers that proxy to `get_option`/`update_option`, coerce autoload flags, and return `WP_Error` for unsupported verbs.             | `IRResource` option config, Pascal-case name, error-code factory.                                                    |
| `packages/cli/src/builders/php/resource/transient/helpers.ts`  | `buildTransientHelperMethods`                                                                                                                                      | Provides transient key and expiration helpers that normalise namespace segments and TTL handling for REST endpoints.                                | `IRResource` transient config, Pascal-case name, optional namespace.                                                 |
| `packages/cli/src/builders/php/resource/transient/routes.ts`   | `buildTransientGetRouteStatements`, `buildTransientSetRouteStatements`, `buildTransientDeleteRouteStatements`, `buildTransientUnsupportedRouteStatements`          | Emits REST handlers for transient storage including identity-aware lookup, TTL writes via `set_transient`, and guard rails for unsupported methods. | `IRResource` transient config, `IRRoute`, resolved identity usage, error-code factory, metadata host/cache segments. |
| `packages/cli/src/builders/php/resource/wpTaxonomy/helpers.ts` | `buildWpTaxonomyHelperMethods`, `buildTaxonomyAssignmentStatement`, `buildGetTaxonomyCall`, `buildResolveTaxonomyTermCall`, `buildPrepareTaxonomyTermResponseCall` | Supplies taxonomy-specific helpers to resolve terms, normalise responses, validate identities, and surface consistent `WP_Error` codes.             | `IRResource` taxonomy storage config, Pascal-case name, resolved identity, error-code factory.                       |
| `packages/cli/src/builders/php/resource/wpTaxonomy/list.ts`    | `buildWpTaxonomyListRouteStatements`                                                                                                                               | Builds list endpoints that enumerate terms with cache metadata, namespace filtering, and prepared response arrays.                                  | `IRResource` taxonomy config, Pascal-case name, metadata host, cache segments.                                       |
| `packages/cli/src/builders/php/resource/wpTaxonomy/get.ts`     | `buildWpTaxonomyGetRouteStatements`                                                                                                                                | Generates single-term handlers that resolve taxonomy identity, guard against missing terms, and return prepared responses.                          | `IRResource` taxonomy config, Pascal-case name, resolved identity, metadata host/cache segments.                     |

#### Task 1.1 Inventory - Blocks (SSR)

| Module                                                               | Export(s)                                                                                                                             | WordPress behaviour                                                                                                                                                       | Inputs consumed                                                                                |
| -------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------- |
| `packages/cli/src/builders/php/blocks/manifestHelper.ts`             | `buildBlocksManifestHelper`                                                                                                           | Produces `blocks-manifest.php` that returns sanitised SSR block manifest data for WordPress runtime consumption.                                                          | `IRv1` blocks with render capability, manifest entries derived from processed block manifests. |
| `packages/cli/src/builders/php/blocks/registrar/index.ts`            | `buildBlocksRegistrarHelper`                                                                                                          | Queues the registrar generator that writes the PHP registrar class used to register render callbacks for SSR blocks.                                                      | `IRv1` (block definitions, plugin namespace) via CLI helper pipeline.                          |
| `packages/cli/src/builders/php/blocks/registrar/methods/register.ts` | `buildRegisterMethod`                                                                                                                 | Creates the static registrar method that loads the manifest, resolves block metadata paths, and calls `register_block_type_from_metadata` with optional render callbacks. | Manifest path constants, plugin root resolution, manifest entry iteration.                     |
| `packages/cli/src/builders/php/blocks/registrar/methods/render.ts`   | `buildBuildRenderArgumentsMethod`, `buildRenderTemplateMethod`                                                                        | Emits helper methods to construct render callback arguments and require the generated PHP render templates for SSR blocks.                                                | Plugin root path, manifest configuration, render template paths.                               |
| `packages/cli/src/builders/php/blocks/registrar/methods/paths.ts`    | `buildResolveConfigPathMethod`, `buildResolveRenderPathMethod`, `buildResolveDirectoryFallbackMethod`, `buildNormaliseRelativeMethod` | Normalises file system lookups for block metadata/render files within the plugin structure, providing graceful fallbacks.                                                 | Plugin root directory, manifest config array values.                                           |
| `packages/cli/src/builders/php/blocks/registrar/common.ts`           | `buildConstFetchExpr`, `buildContinueStatement`, `buildConcat`                                                                        | Shared AST primitives used by registrar methods to compose filesystem checks and loop control in WordPress block registration.                                            | Constant names, iterable variables, expression operands.                                       |
