#!/bin/sh

# Run lint-staged (formats and lints staged files)
pnpm lint-staged

# Check for changeset (only on feature branches)
BRANCH=$(git branch --show-current)
if [[ "$BRANCH" =~ ^(sprint-|feat/|fix/) ]]; then
  if [ -z "$(ls .changeset/*.md 2>/dev/null | grep -v README)" ]; then
    echo ""
    echo "⚠️  No changeset found. Creating one is recommended for tracking changes."
    echo "💡 Run: pnpm changeset"
    echo ""
    # Don't fail - just warn
    # exit 1
  fi
fi
